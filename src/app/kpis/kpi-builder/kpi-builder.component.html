<mat-grid-list class="page-with-toolbar" cols="4" rowHeight="fit">
  <div cdkDropListGroup>
    <mat-grid-tile rowspan="3">
      <div style="height: 100%; width: 100%">
        <app-counter-side-list></app-counter-side-list>
      </div>
    </mat-grid-tile>
    <mat-grid-tile colspan="3" rowspan="4">
      <div class="formula-container">
        <mat-form-field class="formula-control" appearance="outline">
          <mat-label> KPI formula </mat-label>

          <div
            cdkDropListOrientation="horizontal"
            cdkDropList
            [cdkDropListData]="kpiService.kpiResult"
            style="height: 100%; width: 100%"
            (cdkDropListDropped)="kpiService.drop($event)"
            class="example-list"
          >
            <!-- <input matInput rows="0" style="background-color: red;" /> -->
            <mat-chip-grid #chipGrid>
              <div
                class="example-box"
                *ngFor="let item of kpiService.kpiResult; let i = index"
              >
                <mat-chip-row
                  cdkDrag
                  class="chip-item"
                  [ngClass]="
                    item.type == 0
                      ? 'conter-view'
                      : item.type == 1
                      ? 'function-view'
                      : item.type == 2
                      ? 'kpi-view'
                      : item.type == 3
                      ? 'opt-view'
                      : item.type == 4
                      ? 'voidFunction-view'
                      : 'number-view'
                  "
                >
                  <div class="chip-name" matTooltip="{{ item.name }}">
                    {{ item.name }}
                    <div
                      *cdkDragPlaceholder
                      style="width: 30px; overflow-x: hidden"
                    >
                      {{ item.name }}
                    </div>
                  </div>
                  <button
                    matChipRemove
                    [attr.aria-label]="'remove ' + item.name"
                    (click)="kpiService.remove(item)"
                  >
                    <mat-icon>cancel</mat-icon>
                  </button>
                </mat-chip-row>
              </div>
              <input
                placeholder="Enter number here"
                [matChipInputFor]="chipGrid"
                [matChipInputSeparatorKeyCodes]="separatorKeysCodes"
                [matChipInputAddOnBlur]="true"
                (matChipInputTokenEnd)="kpiService.addNumber($event)"
                class="input"
              />
            </mat-chip-grid>
          </div>
        </mat-form-field>
      </div>
    </mat-grid-tile>
    <mat-grid-tile rowspan="3">
      <div style="height: 100%; width: 100%">
        <app-kpi-side-list></app-kpi-side-list>
      </div>
    </mat-grid-tile>
    <mat-grid-tile colspan="3" rowspan="2">
      <div style="height: 100%; width: 100%; padding: 16px">
        <app-operators></app-operators>
        <button mat-button color="primary" (click)="kpiService.submit()">
          Submit
        </button>
      </div>
    </mat-grid-tile>
  </div>
</mat-grid-list>
