<mat-stepper headerPosition="top" #stepper>
  <mat-step style="width: 100%; height: 100%;">
    <ng-template matStepLabel>Build Your Kpi</ng-template>
    <div>
      <mat-grid-list cols="4" rowHeight="3:1">
        <div cdkDropListGroup>
          <mat-grid-tile rowspan="3">
            <div style="height: 100%; width: 100%">
              <app-counter-side-list></app-counter-side-list>
            </div>
          </mat-grid-tile>
          <mat-grid-tile colspan="3" rowspan="4">
            <div class="formula-container">
              <mat-form-field class="formula-control" appearance="outline">
                <mat-label> KPI formula </mat-label>

                <div cdkDropListOrientation="horizontal" cdkDropList [cdkDropListData]="kpiService.kpiResult"
                  style="height: 100%; width: 100%" (cdkDropListDropped)="kpiService.drop($event)" class="example-list">
                  <!-- <input matInput rows="0" style="background-color: red;" /> -->
                  <mat-chip-grid #chipGrid>
                    <div class="example-box" *ngFor="let item of kpiService.kpiResult; let i = index">
                      <mat-chip-row cdkDrag class="chip-item" [ngClass]="
                        item.type == 0
                          ? 'conter-view'
                          : item.type == 1
                          ? 'function-view'
                          : item.type == 2
                          ? 'kpi-view'
                          : item.type == 3
                          ? 'opt-view'
                          : item.type == 4
                          ? 'voidFunction-view'
                          : 'number-view'
                      ">
                        <div class="chip-name" matTooltip="{{ item.name }}">
                          {{ item.name }}
                          <div *cdkDragPlaceholder style="width: 30px; overflow-x: hidden">
                            {{ item.name }}
                          </div>
                        </div>
                        <button matChipRemove [attr.aria-label]="'remove ' + item.name"
                          (click)="kpiService.remove(item)">
                          <mat-icon>cancel</mat-icon>
                        </button>
                      </mat-chip-row>
                    </div>
                    <input placeholder="Enter number here" [matChipInputFor]="chipGrid"
                      [matChipInputSeparatorKeyCodes]="separatorKeysCodes" [matChipInputAddOnBlur]="true"
                      (matChipInputTokenEnd)="kpiService.addNumber($event)" class="input" />
                  </mat-chip-grid>
                </div>
              </mat-form-field>
            </div>
          </mat-grid-tile>
          <mat-grid-tile rowspan="3">
            <div style="height: 100%; width: 100%">
              <app-kpi-side-list></app-kpi-side-list>
            </div>
          </mat-grid-tile>
          <mat-grid-tile colspan="3" rowspan="2">
            <div style="height: 100%; width: 100%; padding: 16px">
              <app-operators></app-operators>
              <button mat-button color="primary" (click)="submit()">
                Submit
              </button>
            </div>
          </mat-grid-tile>
        </div>
      </mat-grid-list>
    </div>
  </mat-step>
  <mat-step>
    <ng-template matStepLabel>Select Kpi Fieldes</ng-template>
    <mat-grid-list class="page-with-toolbar" cols="1" rowHeight="100px">
      <mat-grid-tile>
        <mat-form-field appearance="outline" style="height: 15px;">
          <mat-label>Kpi NAme</mat-label>
          <input matInput [(ngModel)]="Name" appearance="outline" size="small">
        </mat-form-field>
      </mat-grid-tile>
      <mat-grid-tile>

        <form [formGroup]="frm" style="height: 100%;width: 100%;display: flex;" class="mat-elevation-z8">

          <div *ngFor="let field of extraFields" (click)="$event.stopPropagation()" style="margin: 10px;">
            <ng-container [ngSwitch]="field.type">
              <amr-input *ngSwitchCase="'Text'" [controlName]="field.id.toString()" [label]="field.name"
                [placeHolder]="field.name" appearance="outline" size="small"></amr-input>
              <amr-select *ngSwitchCase="'List'" [controlName]="field.id.toString()" [label]="field.name"
                [placeHolder]="field.name" [options]="field.content" appearance="outline" [haveNull]="true"
                size="small"></amr-select>
              <amr-select *ngSwitchCase="'MultiSelectList'" [controlName]="field.id.toString()" [label]="field.name"
                [placeHolder]="field.name" [options]="field.content" [isMulty]="true" appearance="outline"
                size="small"></amr-select>
            </ng-container>
          </div>
        </form>
      </mat-grid-tile>
      <mat-grid-tile>
        <div style="width: 100%;text-align: right;">
          <button mat-button color="primary" (click)="submit()">
            Submit
          </button>
        </div>
      </mat-grid-tile>
    </mat-grid-list>
  </mat-step>
</mat-stepper>